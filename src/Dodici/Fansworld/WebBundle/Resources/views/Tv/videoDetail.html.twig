{% extends "DodiciFansworldWebBundle:Tv:base.html.twig" %}

{% block title %}{{ parent() }} - Video detail{% endblock %}

{% block metafbimage %}{{ appmedia.imageurl(video.image, 'small_square') }}{% endblock %}
{% block metafbtype %}{{ appfacebook.type('video') }}{% endblock %}

{% block tv_body %}
    {% embed "DodiciFansworldWebBundle:Layout/Embed:tv_videodetail.html.twig" %}
        {% block breadcrumb %}
            <span class="nav-bar tv">TV {% if video.videocategory %}| <a href="{{ path('teve_explorechannel', {id: video.videocategory.id, slug: video.videocategory.slug}) }}">{{ video.videocategory.title }}</a>{% endif %} | {{ video.title }}</span>
        {% endblock %}
        
        {% block top_left_content %}
            {{ kalturatwig.player(video, true)|raw }}
        {% endblock %}
        
        {% block top_right_content %}
            {% include 'DodiciFansworldWebBundle:Default:blocks/button_group.html.twig'  %}
            
            {% include 'DodiciFansworldWebBundle:Video:blocks/grid.html.twig' with {videos: videosRelated, sectionId:'videos-related-sort',dataGridRelatedId: video.id} %}
        {% endblock %}
        
        {% block bottom_left_content %}
            <div class="video-detail-wall">
                {% if video.author %}
                    <div class="user-info">
                        {% if video.author.image %}
                        <a class="avatar" href="{{ path('user_land', {username: video.author.username}) }}">
                            {% thumbnail video.author.image, 'mini_square' %}
                        </a>
                        {% endif %}
                        <a class="name" href="{{ path('user_land', {username: video.author.username}) }}">
                            {{ video.author }}
                        </a>
                        {% if video.author.city or video.author.country %}
                          {% set location = [video.author.city, video.author.country]|join(', ') %}
                          <span class="location">{{ location }}</span>
                        {% endif %}
                        <a class="videoCount" href="{{ path('user_land', {username: video.author.username}) }}">
                          {{ video.author.videoCount }} videos
                        </a>
                    </div>
                {% endif %}
                  
                {% include 'DodiciFansworldWebBundle:Default:share.html.twig' with {entity: video, sharebutton: true, likebutton: true} %}
                  
                {% include 'DodiciFansworldWebBundle:Tv:blocks/now-watching.html.twig' with {entity: video} %}
            
                <div class="content">
                    {% if video.content %}
                        <p data-expandable data-slice-point="300">{{ video.content|striptags|nl2br }}</p>
                    {% endif %}
                </div>

                {% include 'DodiciFansworldWebBundle:Comment:blocks/box.html.twig' with {entity: video} %}
            </div>
        {% endblock %}
            
        {% block bottom_right_content %}
            {% include 'DodiciFansworldWebBundle:Video:blocks/grid.html.twig' with {videos: videosRecommended, sectionId:'videos-related'} %}
        {% endblock %}
    {% endembed %}		
{% endblock %}