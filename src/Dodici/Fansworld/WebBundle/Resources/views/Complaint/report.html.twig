{% extends "DodiciFansworldWebBundle::popup.html.twig" %}

{% block javascripts %}
	{{ parent() }}
	<script src="{{ asset('bundles/dodicifansworldweb/js/base.js') }}" type="text/javascript"></script>
{% endblock %}

{% block content %}
<div id="report" style="height: 120px">
    <form id="complaintReport" name="report" action="" method="post">
        <label>Categoria:</label>
        <br/>
        <select class="category" name="category" style="width: 300px">
            {% for category in categories %}
                <option value="{{ category.id }}">{{ category }}</option>
            {% endfor %}
        </select>
        <br/>
        <label>Comentario:</label>
        <br/>
        <textarea class="comment" style="width: 300px"></textarea>
        <br/>
        <input type="submit" name="submit" value="Reportar" />
    </form>
</div>

<script type="text/javascript">
    $(document).ready(function(){
        $("#complaintReport").live('submit', function(){
            ajax.genericAction('complaint_make', {
                'entityType': '{{ entityType }}',
                'entityId': {{ entityId }},
                'comment': $("#complaintReport textarea.comment").val(),
                'category': $("#complaintReport select option:selected").attr("value")
            }, 
            function(response){
                console.log(response);
            },
            function(error){
                console.error(error);
            });
            return false;
        });
    });
</script>
{% endblock %}