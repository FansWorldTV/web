{% extends "DodiciFansworldWebBundle:User:profile_base.html.twig" %}

{% block title %}{{ parent() }} - {{ album.title }}{% endblock %}

{% block javascripts %}
    {{ parent() }}
    <script src="{{ asset('bundles/dodicifansworldweb/js/albums.js') }}" type="text/javascript"></script>
{% endblock %}

{% block profile_tabs %}
	{% set active_tab = 'photos' %}
	{{ parent() }}
{% endblock %}

{% block profile_head %}
	{{ parent() }}
{% endblock %}

{% block inner_content %}
{% if (user == app.user) %}
    <div class="row-fluid update clearfix"> 
        <span></span> 
        <div class="upd_option clearfix"> 
            <a class="btn_picture btn_upload_photo" href="{{ path('photo_fileupload') }}">{{'load image'|trans}}</a> 
        </div>    
    </div>
{% endif %} 
    
<div class="row-fluid album-detail">
    <span class="title">
        <h4>{{ album.title }} ({{ album.photos|length }}) <a class="more" href="{{ path('user_listalbums', {username: user.username}) }}"> {{'Albums'|trans}}</a></h4>
    </span>
        
    <div class="am-container">
        {% for photo in album.photos %}
                {% if appstate.canview(photo) %}
                        <a href="{{ path('photo_show', {'id': photo.id, 'slug': photo.slug}) }}">{% thumbnail photo.image, 'medium' %}</a>
                {% endif %}
        {% endfor %}
    </div>
        
    <div class="clearfix"></div>
        
    <div class="content">
        <p>{{ album.content }}</p>
    </div>
</div>
<div class="clearfix"></div>
<div class="row-fluid">
    {% include 'DodiciFansworldWebBundle:Default:share.html.twig' with {entity: album} %}    
</div>

{% include 'DodiciFansworldWebBundle:Default:comments_and_tags.html.twig' with {entity: album} %}
    
<script type="text/javascript">
    site.startMosaic($('.am-container'), {margin : 0});
    $(document).ready(function(){
        albums.init();
    });
</script>
{% endblock %}
