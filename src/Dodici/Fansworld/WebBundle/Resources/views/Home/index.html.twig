{% extends "DodiciFansworldWebBundle:Layout:one_column.html.twig" %}

{% block header %}
    {% set section_selected = 'home' %}
    {{ parent() }}
{% endblock %}

{% block main %}
    {% set fullwidth = true %}
    {{ parent() }}
{% endblock %}

{% block javascripts %}
    {{ parent() }}
    <script src="{{ asset('bundles/dodicifansworldweb/js/home.js') }}" type="text/javascript"></script>
{% endblock %}

{% block main_content %}
    <header class="home-header">
        <h1 class="title">Accede a <b>contenido exclusivo</b> y <b>comparte</b> tu pasi√≥n.</h1>

        <div class="center-container">
            <ul class="sections">
                {% for cat in categories %}
                    <li {% if loop.first %}class="active"{% endif %} data-category-id = "{{ cat.id }}">{{ cat.title }}</li>
                {% endfor %}
            </ul>

            <div class="category-container">
                {% set c = 0%}
                {% for cat in categories %}
                    {% set c = c+1 %}
                    {% set video = videos[cat.id] %}
                    {% if video %}
                    <div data-category-id="{{ cat.id }}" {% if not loop.first %} class="hidden" {% endif %} >
                        
                        {% if video.splash %}
                            {% thumbnail video.splash, 'home_splash' %}
                        {% else %}
                            {% thumbnail video.image, 'home_splash' %}
                        {% endif %}
                        
                        {% if video %}
                            {#{% thumbnail video.image, 'wall' %}#}
                            <a href="{{ path('video_show', {'id': video.id, 'slug': video.slug}) }}"><i class="play-video"></i></a>
                        {% endif %}
                            
                        <div class="content-container">
                            <h1>Canal: {{ cat.title }}</h1>

                            {% if video %}
                                <h2>{{ video.title }}</h2>
                                <p>{{ video.content }}</p>
                            {% endif %}

                            <a href="{{ path('teve_home') }}"><button class="explore" >Explorar</button></a>

                            {% if not is_granted("IS_AUTHENTICATED_REMEMBERED") %}
                                <a href="{{ path('fos_user_registration_register') }}"><button class="register">Registrarse</button></a>
                            {% endif %}
                        </div>
                    </div>
                    {% endif %}
                {% endfor %}
            </div>

        </div>

        <ul class="tabs" {% if is_granted("IS_AUTHENTICATED_REMEMBERED") %} data-user-logged="true" {% else %} data-user-logged = "false" {% endif %}>
            {% if not is_granted("IS_AUTHENTICATED_REMEMBERED") %}
                <li id="tab-enjoy" class="active" data-type-tab="enjoy" ><a href="#tab-enjoy">Disfruta</a></li>
                <li id="tab-connect" data-type-tab="connect" ><a href="#tab-connect">Conectate</a></li>
                <li id="tab-participate" data-type-tab="participate" ><a href="#tab-participate">Participa</a></li>
            {% else %}
                <li id="tab-activityFeed" class="active" data-type-tab="activityFeed"><a href="#tab-activityFeed">Actividad</a></li>
                <li id="tab-popular" data-type-tab="popularFeed"><a href="#tab-popular">Popular</a></li>
            {% endif %}
        </ul>
    </header>

    <section class="home-content">
        {% if not is_granted("IS_AUTHENTICATED_REMEMBERED") %}

            {% include 'DodiciFansworldWebBundle:Home:blocks/not_logged_tabs.html.twig' %}

        {% else %}
            <!-- ACTIVIDAD -->
            <section class="content-container" data-type-tab="activityFeed">
                <div class="tags clearfix">
                    <div class="pull-left">
                        <span class="label active" data-feed-filter="0">Todos</span>
                        <span class="label" data-feed-filter="1">Idolos</span>
                        <span class="label" data-feed-filter="2">Equipos</span>
                        <span class="label" data-feed-filter="3">Fans</span>
                    </div>
                </div>
                <div id="elements" class="isotope_container row" style="width: 70%; float: left; margin-left: 0px;"></div>
                <section class="span3">
                    <h3>Actividad reciente</h3>
                    <ul>
                        {% for user in friendUsers %}
                            <li>{% thumbnail user.image, 'avatar' %} {{ user }} es amig@ de richard y george</li>
                        {% endfor %}
                    </ul>
                </section>
            </section>

            <!-- POPULAR -->
            <section class="content-container" data-type-tab="popularFeed">
                <div id="elements" class="isotope_container row"></div>
            </section>
        {% endif %}
    </section>
{% endblock %}